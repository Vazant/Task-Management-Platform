<div class="auth-container">
  <div class="auth-card">
    <!-- Шапка формы -->
    <div class="auth-header">
      <div class="logo">
        <h2>TaskBoard Pro</h2>
      </div>
      <h1 id="auth-title">Восстановление пароля</h1>
    </div>

    <!-- Описание -->
    <div class="auth-description">
      <p *ngIf="!emailSent">
        Введите ваш email, и мы отправим инструкции по восстановлению пароля
      </p>
      <p *ngIf="emailSent" class="success-message">
        Инструкции отправлены на ваш email
      </p>
    </div>

    <!-- Форма восстановления -->
    <div *ngIf="!emailSent">
      <form 
        [formGroup]="forgotPasswordForm" 
        (ngSubmit)="onSubmit()" 
        class="auth-form"
        aria-labelledby="auth-title">
        
        <!-- Email поле -->
        <div class="form-field-group">
          <label for="email" class="form-label">Email</label>
          <div class="input-wrapper">
            <i-lucide [img]="Mail" [size]="20" class="input-icon"></i-lucide>
            <input
              id="email"
              type="email"
              formControlName="email"
              placeholder="Введите ваш email"
              autocomplete="email"
              class="form-input"
              [class.error]="isFieldInvalid('email')"
              aria-describedby="email-error">
          </div>
          <div 
            *ngIf="isFieldInvalid('email')" 
            id="email-error" 
            class="error-message" 
            role="alert">
            {{ getErrorMessage('email') }}
          </div>
        </div>

        <!-- Кнопка отправки -->
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="forgotPasswordForm.invalid || (loading$ | async)"
          [attr.aria-pressed]="(loading$ | async)">
          <i-lucide 
            *ngIf="loading$ | async" 
            [img]="Loader2" 
            [size]="20" 
            class="btn-icon spinning">
          </i-lucide>
          <span *ngIf="(loading$ | async) === false">Отправить инструкции</span>
        </button>
      </form>
    </div>

    <!-- Успешное состояние -->
    <div *ngIf="emailSent" class="success-content">
      <div class="success-icon">
        <i-lucide [img]="CheckCircle" [size]="48" class="success-icon-svg"></i-lucide>
      </div>
      <p class="success-text">
        Проверьте ваш email и следуйте инструкциям для восстановления пароля
      </p>
      <button 
        type="button" 
        class="btn btn-outline" 
        (click)="resetForm()">
        <i-lucide [img]="RefreshCw" [size]="20" class="btn-icon"></i-lucide>
        <span>Отправить еще раз</span>
      </button>
    </div>

    <!-- Футер формы -->
    <div class="auth-footer">
      <p><a routerLink="/auth/login" class="auth-link">Вернуться к входу</a></p>
    </div>
  </div>
</div>
